<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />
		<title>ciallo world</title>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	</head>

	<body>
		<div id="app">
			<pre>{{ pm2 }}</pre>
			<pre>{{ server }}</pre>
		</div>

		<script
			src="https://cdn.socket.io/4.7.5/socket.io.min.js"
			integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO"
			crossorigin="anonymous"
		></script>
		<script>
			const { createApp } = Vue;

			const app = createApp({
				data() {
					return {
						socket: null,
						connected: false,
						server: {},
						pm2: []
					};
				},
				mounted() {
					this.initSocket();
				},
				methods: {
					initSocket() {
						this.socket = io("http://localhost:3000");

						this.socket.on("connect", () => {
							this.connected = true;
						});

						this.socket.on("disconnect", () => {
							this.connected = false;
						});

						this.socket.on("server", (data) => {
							this.server = data;
						})
						this.socket.on("pm2", (data) => {
							this.pm2 = data;
						})
					},
				},
			});

			app.mount("#app");
		</script>
	</body>
</html>
